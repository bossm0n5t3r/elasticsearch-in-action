# 3장. 아키텍처

## 3.1 개요

- 자바로 개발된 고성능 풀텍스트 검색 라이브러리인 아파치 루씬은 강력한 검색 및 인덱싱 기능으로 잘 알려져 있다.
- 루씬을 핵심 풀텍스트 검색 라이브러리로 래핑해 확장 가능한 분산형 서버 측 애플리케이션을 구축한다.
- 일래스틱서치는 풀텍스트 검색을 제공하기 위한 중심 요소로 루씬을 사용해 프로그래밍 언어에 구애받지 않는 애플리케이션을 구축했다.
- 그러나 일래스틱서치는 단순한 풀텍스트 검색엔진 그 이상
- 고가용성, 내결함성, 속도를 기본 목표로 하는 성능이 뛰어나고 확장 가능한 최신 검색엔진이다.

### 3.1.1 데이터 입력

- 일래스틱서치가 쿼리에 대한 답변을 제공하려면 먼저 데이터가 필요하다.
- 데이터는 여러 소스에서 데이터베이스에서 추출, 파일시스템에서 복사, 다른 시스템 (실시간 스트리밍 시스템 포함)에서 로드 등 다양한 방법으로 일래스틱서치로 인덱싱할 수 있다.
- 데이터베이스
  - 데이터베이스의 데이터 형태가 일래스틱서치가 기대하는 것과 정확하게 일치하지 않을 수 있으므로 일래스틱서치에 인덱싱하기 전에 ETL(추출, 변환, 적재) 도구를 사용해 데이터를 변환하고 강화할 수 있다.
    - 로그 스태시 등
- 파일 저장소
  - 애플리케이션, 가상 머신 (VM), 데이터베이스 및 기타 시스템은 수많은 로그 및 메트릭 데이터를 뱉어낸다.
  - 검색, 분석, 저장을 위해 이 데이터를 일래스틱서치로 가져와야 한다.
  - 파일비트(Filebeat) 또는 로그스태시 같은 도구를 사용해 검색, 디버그, 분석 목적으로 일래스틱서치에 데이터를 덤프할 수 있다.
- 애플리케이션
  - 로그스태시 같은 일래스틱 스택 구성 요소를 사용하거나 일래스틱서치에 데이터를 게시하는 내부 실시간 스트리밍 라이브러리를 구축할 수 있고 이 데이터는 검색 기능에 사용된다.
- 일래스틱서치는 데이터가 영구 저장소에서 나오거나 실시간으로 내부적으로 분석되고 처리될 것으로 기대한다.
- 검색 및 분석 형태의 분석 프로세스는 데이터를 효율적으로 검색하는데 도움된다.
- 일반적인 설정에서 조직은 ETL 도구를 사용해 데이터를 일래스틱서치로 전송한다.
- 수집된 데이터는 일래스틱서치 저장소를 통해 생성되면 검색 가능하다.

### 3.1.2 데이터 처리

### 3.1.3 데이터 출력

## 3.2 빌딩 블록

### 3.2.1 도큐먼트

### 3.2.2 인덱스

### 3.2.3 데이터 스트림

### 3.2.4 샤드와 복제본

### 3.2.5 노드와 클러스터

## 3.3 역인덱스

## 3.4 관련성

### 3.4.1 관련성 점수

### 3.4.2 관련성(유사성) 알고리즘

## 3.5 라우팅 알고리즘

## 3.6 스케일링

### 3.6.1 스케일 업 (Scale Up, 수직 확장)

### 3.6.2 스케일 아웃 (Scale Out, 수평 확장)

## 요약
